<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IcebergIC • Split Hero + Live Demo</title>

  <style>
    /* =========================
       THEME TOKENS (tweak freely)
       ========================= */
    :root{
      --bg: radial-gradient(1200px 600px at 20% -10%, #202020 0%, #0f0f0f 60%, #0b0b0b 100%);
      --surface: #111213;
      --card: #ffffff;      /* demo card stays light for contrast */
      --text: #eaeaea;
      --muted: #a7a7a7;
      --accent: #2563eb;
      --radius: 24px;
      --gap: clamp(16px, 3vw, 32px);
    }

    /* =========
       PAGE LAYER
       ========= */
    html, body { height: 100%; }
    body{
      margin:0;
      min-height:100vh;
      background:var(--bg);
      color:var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    .hero-shell{
      display:grid;
      grid-template-columns: 1.05fr 0.95fr; /* ~52% / 48% */
      align-items: center;
      gap: var(--gap);
      max-width: 1200px;
      margin: 0 auto;
      padding: clamp(16px, 4vw, 40px);
    }

    /* LEFT PANEL (demo/graphic) */
    .panel-demo{
      position: relative;
      min-height: min(72vh, 760px);
      display:flex;
      align-items:center;
      justify-content:center;
      isolation:isolate;
      transform: translateX(-4%); /* off-center vibe */
    }

    /* RIGHT PANEL (copy/CTA) */
    .panel-copy{
      display:flex;
      align-items:center;
      justify-content:flex-start;
    }
    .copy-inner{
      background: color-mix(in oklab, var(--surface) 92%, transparent);
      border-radius: var(--radius);
      padding: clamp(20px, 4vw, 36px);
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
      max-width: 560px;
    }
    .eyebrow{
      display:inline-block;
      font-size:.85rem;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:.5rem;
    }
    #hero-title{
      font-size: clamp(32px, 5vw, 56px);
      line-height: 1.05;
      margin: 0 0 .75rem 0;
    }
    .subhead{
      color: color-mix(in oklab, var(--text) 82%, white 0%);
      font-size: clamp(16px, 1.6vw, 18px);
      line-height: 1.5;
      margin: 0 0 1.25rem;
      max-width: 34ch;
    }
    .cta-row{
      display:flex;
      gap:.75rem;
      flex-wrap: wrap;
    }
    .btn-primary{
      display:inline-block;
      background: var(--accent);
      color:white;
      text-decoration:none;
      padding: .9rem 1.1rem;
      border-radius: 14px;
      font-weight: 700;
    }
    .btn-primary:hover{ filter: brightness(1.05); }
    .btn-link{
      display:inline-block;
      color: var(--text);
      text-decoration:none;
      padding:.9rem 0;
      font-weight:600;
      opacity:.85;
    }
    .btn-link:hover{ opacity:1; }

    /* =======================
       DEMO CARD (your original)
       ======================= */
    * { box-sizing: border-box; }

    .demo-container {
      background: var(--card);
      border-radius: 24px;
      padding: 48px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.35);
      position: relative;
      overflow: hidden;
    }

    .prompt-text {
      font-size: clamp(20px, 4vw, 28px);
      font-weight: 700;
      color: #1a1a1a;
      line-height: 1.2;
      margin-bottom: 32px;
      text-align: left;
      opacity: 0;
      animation: fadeInSlide 1s ease-out 0.5s forwards;
    }

    .upload-area {
      background: #f8f9fa;
      border: 3px dashed #e0e0e0;
      border-radius: 16px;
      padding: 24px;
      text-align: center;
      margin-bottom: 24px;
      opacity: 0;
      animation: fadeInSlide 1s ease-out 1.5s forwards;
    }

    .document-item {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 16px;
      font-weight: 600;
      color: #374151;
    }

    .doc-icon { font-size: 20px; }

    .analyze-button {
      width: 100%;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 16px;
      padding: 18px 32px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0;
      animation: fadeInSlide 1s ease-out 2.5s forwards;
      margin-bottom: 24px;
    }

    .results-panel {
      background: #f8fafc;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      padding: 32px;
      opacity: 0;
      transform: translateY(20px);
      animation: showResults 1s ease-out 4.5s forwards;
    }

    .chart-container { margin-bottom: 24px; }
    .chart-title {
      font-size: 18px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 16px;
      text-align: center;
    }

    /* Line Chart */
    .line-chart {
      position: relative;
      height: 200px;
      background: linear-gradient(to bottom, rgba(37, 99, 235, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: end;
      justify-content: space-between;
    }
    .line-chart svg {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
    }
    .chart-point {
      position: relative;
      z-index: 2;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .point-value {
      background: #2563eb;
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 700;
      min-width: 60px;
    }
    .point-year {
      font-size: 12px;
      color: #6b7280;
      font-weight: 600;
    }

    /* Bar Chart */
    .bar-chart {
      display: flex;
      align-items: end;
      height: 200px;
      gap: 20px;
      padding: 20px;
      background: linear-gradient(to top, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
      border-radius: 12px;
    }
    .bar-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    .bar {
      background: linear-gradient(to top, #10b981, #34d399);
      border-radius: 6px 6px 0 0;
      width: 100%;
      min-height: 20px;
      position: relative;
      animation: barGrow 1s ease-out;
    }
    .bar-value {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #10b981;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 700;
      white-space: nowrap;
    }
    .bar-year {
      font-size: 12px;
      color: #6b7280;
      font-weight: 600;
    }

    /* Table */
    .rent-table {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #e2e8f0;
    }
    .table-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      padding: 16px;
      border-bottom: 1px solid #e2e8f0;
      align-items: center;
    }
    .table-row:last-child { border-bottom: none; }
    .table-header {
      background: #f8fafc;
      font-weight: 700;
      color: #374151;
      font-size: 14px;
    }
    .table-cell {
      font-size: 14px;
      color: #1a1a1a;
      font-weight: 600;
    }
    .cagr-highlight {
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-weight: 700;
      text-align: center;
    }

    /* Misc */
    .typing-indicator {
      display: none;
      align-items: center;
      gap: 8px;
      color: #6b7280;
      font-style: italic;
      margin-top: 16px;
    }
    .typing-dots { display: flex; gap: 4px; }
    .typing-dots span {
      width: 6px; height: 6px; background: #6b7280;
      border-radius: 50%;
      animation: typingBounce 1.4s infinite ease-in-out;
    }
    .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
    .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

    .reset-indicator {
      position: absolute;
      top: 20px; right: 20px;
      background: rgba(37, 99, 235, 0.1);
      color: #2563eb;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      opacity: 0;
      animation: pulseIndicator 0.5s ease-out 8s forwards;
    }

    /* Animations */
    @keyframes fadeInSlide { from { opacity:0; transform: translateY(30px);} to {opacity:1; transform: translateY(0);} }
    @keyframes showResults { from { opacity:0; transform: translateY(20px);} to {opacity:1; transform: translateY(0);} }
    @keyframes typingBounce { 0%,80%,100%{ transform: scale(0);} 40%{ transform: scale(1);} }
    @keyframes pulseIndicator { 0%{ opacity:0; transform: scale(0.8);} 50%{ opacity:1; transform: scale(1.05);} 100%{ opacity:.8; transform: scale(1);} }
    @keyframes barGrow { from{ height:0;} to{ height: var(--bar-height);} }
    @keyframes lineGrow { from{ stroke-dashoffset:1000;} to{ stroke-dashoffset:0;} }

    .demo-container.reset * { animation: none; opacity: 0; }

    /* Responsive stack */
    @media (max-width: 980px){
      .hero-shell{ grid-template-columns: 1fr; padding: clamp(12px, 5vw, 24px); }
      .panel-demo{ transform:none; min-height:auto; }
      .copy-inner{ margin-top: 8px; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>

  <div class="hero-shell">
    <!-- LEFT: Demo / Graphic -->
    <section class="panel-demo">
      <div class="demo-container" id="demoContainer" aria-live="polite">
        <div class="reset-indicator" id="resetIndicator">🔄 Demo Loop</div>

        <div class="prompt-text" id="promptText">
          Analyze US data center cap rate trends
        </div>

        <div class="upload-area" id="uploadArea" role="region" aria-label="Uploaded document">
          <div class="document-item">
            <span class="doc-icon">📊</span>
            <span id="docName">US_DataCenter_CapRates.xlsx</span>
          </div>
        </div>

        <button class="analyze-button" id="analyzeBtn" type="button" aria-controls="resultsPanel">
          <span id="btnText">Analyze with IcebergIC</span>
        </button>

        <div class="typing-indicator" id="typingIndicator" role="status" aria-live="polite">
          <span>Processing data</span>
          <div class="typing-dots"><span></span><span></span><span></span></div>
        </div>

        <div class="results-panel" id="resultsPanel">
          <div class="chart-container" id="chartContainer">
            <!-- Chart content will be dynamically inserted -->
          </div>
        </div>
      </div>
    </section>

    <!-- RIGHT: Hero copy -->
    <section class="panel-copy" aria-labelledby="hero-title">
      <div class="copy-inner">
        <span class="eyebrow">Assistant</span>
        <h1 id="hero-title">Tailored to<br/>Your Expertise</h1>
        <p class="subhead">
          Delegate complex tasks in natural language to your domain‑specific assistant.
          IcebergIC turns raw filings into decisions—fast.
        </p>
        <div class="cta-row">
          <a class="btn-primary" href="#try">Explore IcebergIC</a>
          <a class="btn-link" href="#how">How it works →</a>
        </div>
      </div>
    </section>
  </div>

  <script>
    /* ======= Demo data (unchanged) ======= */
    let currentLoop = 0;
    let timers = [];
    const rm = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    const scenarios = [
      {
        prompt: "Analyze US data center cap rate trends",
        document: "US_DataCenter_CapRates.xlsx",
        icon: "📈",
        type: "line",
        title: "US Data Center Cap Rates (2022-2025)",
        data: [
          { year: "2022", value: "4.2%" },
          { year: "2023", value: "4.1%" },
          { year: "2024", value: "3.3%" },
          { year: "2025", value: "3.2%" }
        ]
      },
      {
        prompt: "Compare NoVa data center value comps",
        document: "NoVa_ValueComps_Analysis.xlsx",
        icon: "💰",
        type: "bar",
        title: "Northern Virginia Value per SF",
        data: [
          { year: "2022", value: "$1,364", height: 25 },
          { year: "2023", value: "$1,310", height: 20 },
          { year: "2024", value: "$1,846", height: 70 },
          { year: "2025", value: "$2,051", height: 95 }
        ]
      },
      {
        prompt: "Generate Chicago rent comp analysis",
        document: "Chicago_RentComps_Q4.xlsx",
        icon: "🏢",
        type: "table",
        title: "Chicago Data Center Rent Analysis",
        data: [
          { year: "2022", value: "$92.76" },
          { year: "2023", value: "$96.89" },
          { year: "2024", value: "$99.12" },
          { year: "2025", value: "$103.01" },
          { cagr: "3.6% CAGR" }
        ]
      }
    ];

    /* ======= Utility & safer timing ======= */
    function schedule(fn, ms) {
      const id = setTimeout(fn, ms);
      timers.push(id);
    }
    function clearTimers() {
      timers.forEach(clearTimeout);
      timers = [];
    }
    function toNumber(s) {
      if (typeof s !== 'string') return Number(s);
      return Number(s.replace(/[$,%\s,]/g, ''));
    }

    /* ======= Chart/Markup builders ======= */
    function createLineChart(data, title) {
      return `
        <div class="chart-title">${title}</div>
        <div class="line-chart">
          <svg>
            <path d="M 80 40 L 220 50 L 360 100 L 500 120"
                  stroke="#2563eb" stroke-width="3" fill="none"
                  stroke-dasharray="1000"
                  style="animation: lineGrow 2s ease-out forwards;" />
          </svg>
          ${data.map(p => `
            <div class="chart-point">
              <div class="point-value">${p.value}</div>
              <div class="point-year">${p.year}</div>
            </div>
          `).join('')}
        </div>
      `;
    }

    function createBarChart(data, title) {
      return `
        <div class="chart-title">${title}</div>
        <div class="bar-chart">
          ${data.map(item => `
            <div class="bar-item">
              <div class="bar" style="--bar-height: ${item.height}%; height: ${item.height}%;">
                <div class="bar-value">${item.value}</div>
              </div>
              <div class="bar-year">${item.year}</div>
            </div>
          `).join('')}
        </div>
      `;
    }

    function createTable(data, title) {
      return `
        <div class="chart-title">${title}</div>
        <div class="rent-table">
          <div class="table-row table-header">
            <div>Year</div>
            <div>Rent/SF</div>
            <div>Growth</div>
          </div>
          ${data.slice(0,4).map((item, i) => {
            const base = toNumber(data[0].value);
            const val = toNumber(item.value);
            const growth = i === 0 ? 'Baseline' : '+' + (((val / base) - 1) * 100).toFixed(1) + '%';
            return `
              <div class="table-row">
                <div class="table-cell">${item.year}</div>
                <div class="table-cell">${item.value}</div>
                <div class="table-cell">${growth}</div>
              </div>
            `;
          }).join('')}
          <div class="table-row" style="background:#fef3c7;">
            <div class="table-cell" style="font-weight:700;">CAGR</div>
            <div class="table-cell cagr-highlight">${data[4].cagr}</div>
            <div class="table-cell" style="font-weight:700;">2022-2025</div>
          </div>
        </div>
      `;
    }

    /* ======= Demo flow (looped) ======= */
    function resetDemo() {
      clearTimers();
      const c = document.getElementById('demoContainer');
      c.classList.add('reset');

      // explicit UI reset
      document.getElementById('typingIndicator').style.display = 'none';
      const btn = document.getElementById('analyzeBtn');
      btn.style.background = '#2563eb';
      document.getElementById('btnText').textContent = 'Analyze with IcebergIC';
      document.getElementById('resetIndicator').style.opacity = '0';
      document.getElementById('chartContainer').innerHTML = '';
      document.getElementById('resultsPanel').style.opacity = '0';
      document.getElementById('resultsPanel').style.transform = 'translateY(20px)';

      setTimeout(() => {
        c.classList.remove('reset');
        startDemo();
      }, rm ? 0 : 500);
    }

    function startDemo() {
      const s = scenarios[currentLoop % scenarios.length];

      // Update content
      document.getElementById('promptText').textContent = s.prompt;
      document.querySelector('.doc-icon').textContent = s.icon;
      document.getElementById('docName').textContent = s.document;

      const step = rm ? 0 : 1000;

      schedule(() => {
        const el = document.getElementById('promptText');
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      }, step * 0.5);

      schedule(() => {
        const el = document.getElementById('uploadArea');
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      }, step * 1.5);

      schedule(() => {
        const el = document.getElementById('analyzeBtn');
        el.style.opacity = '1';
        el.style.transform = 'translateY(0)';
      }, step * 2.5);

      // Simulate processing (also wire up real click)
      const triggerProcessing = () => {
        const btn = document.getElementById('analyzeBtn');
        btn.style.background = '#1d4ed8';
        document.getElementById('btnText').textContent = 'Processing...';
        document.getElementById('typingIndicator').style.display = 'flex';
      };

      const completeProcessing = () => {
        document.getElementById('typingIndicator').style.display = 'none';
        document.getElementById('btnText').textContent = 'Analysis Complete ✓';
        document.getElementById('analyzeBtn').style.background = '#10b981';
        let html = '';
        if (s.type === 'line') html = createLineChart(s.data, s.title);
        else if (s.type === 'bar') html = createBarChart(s.data, s.title);
        else html = createTable(s.data, s.title);
        document.getElementById('chartContainer').innerHTML = html;
        const panel = document.getElementById('resultsPanel');
        panel.style.opacity = '1';
        panel.style.transform = 'translateY(0)';
      };

      schedule(triggerProcessing, step * 3.5);
      schedule(completeProcessing, step * 4.5);

      schedule(() => { document.getElementById('resetIndicator').style.opacity = '0.8'; }, step * 7.5);
      schedule(() => { currentLoop++; resetDemo(); }, step * 9);

      // Click allows skipping the wait
      const btn = document.getElementById('analyzeBtn');
      btn.onclick = () => {
        clearTimers();
        triggerProcessing();
        setTimeout(completeProcessing, rm ? 0 : 900);
      };
    }

    // Kickoff
    setTimeout(startDemo, 1000);
  </script>
</body>
</html>
